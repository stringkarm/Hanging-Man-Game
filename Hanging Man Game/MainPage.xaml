<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Hanging_Man_Game.MainPage"
             BackgroundColor="Transparent">

    <Grid RowDefinitions="Auto,*,Auto"
          ColumnDefinitions="*,*">

        <Image Source="landingpage.png"
               Aspect="AspectFill"
               Grid.RowSpan="3"
               Grid.ColumnSpan="2" />

        <BoxView Grid.RowSpan="3"
                 Grid.ColumnSpan="2"
                 Color="#00000000"/>

        <HorizontalStackLayout Grid.Row="0" Grid.ColumnSpan="2"
                               HorizontalOptions="End"
                               VerticalOptions="Start"
                               Margin="0,10,10,0">

            
            <ImageButton x:Name="Home"
                         Source="home.png"
                         Clicked="Home_Clicked"
                         WidthRequest="40"
                         HeightRequest="40"
                         Margin="0,0,10,0"
                         BackgroundColor="Transparent"/>

            <ImageButton x:Name="Reset"
                         Source="restart.png"
                         Clicked="Reset_Clicked"
                         WidthRequest="40"
                         HeightRequest="40"
                         BackgroundColor="Transparent"/>
            
            
        </HorizontalStackLayout>
        
        <Label Grid.Row="0" Grid.ColumnSpan="2"
               Text="{Binding GameStatus}"
               FontAttributes="Bold"
               FontSize="Medium"
               TextColor="White"
               FontFamily="Arial"
               HorizontalOptions="Center"
               VerticalOptions="Start"
               Margin="0,10,0,0" />
        
        

        <AbsoluteLayout Grid.Row="1" Grid.ColumnSpan="2"
                        HeightRequest="300"
                        HorizontalOptions="Center"
                        VerticalOptions="Start"
                        Margin="0,30,0,0">


            <Label Text="{Binding Message}"
       FontSize="22"
       TextColor="Red"
       FontFamily="Arial"
       FontAttributes="Bold"
       HorizontalTextAlignment="Center"
       AbsoluteLayout.LayoutBounds="0.5,0.66,-1,-1"
       AbsoluteLayout.LayoutFlags="PositionProportional"
       LineBreakMode="WordWrap"/>

            <Image Source="hangbackground.png"
                   Aspect="AspectFill"
                   AbsoluteLayout.LayoutBounds="0,0,1,1"
                   AbsoluteLayout.LayoutFlags="All" />

            <Image Source="head.png"
                   IsVisible="{Binding IsHeadVisible}"                  
                   WidthRequest="50"
                   HeightRequest="200"
                   AbsoluteLayout.LayoutBounds="0.51,0.13,25,25"
                   AbsoluteLayout.LayoutFlags="PositionProportional" />

            <Image Source="stomach.png"
                   IsVisible="{Binding IsBodyVisible}"
                   WidthRequest="60"
                   HeightRequest="200"
                   AbsoluteLayout.LayoutBounds="0.51,0.22,25,70"
                   AbsoluteLayout.LayoutFlags="PositionProportional" />

            <Image Source="lefthand.png"
                   IsVisible="{Binding IsLeftHandVisible}"
                   WidthRequest="60"
                   HeightRequest="200"
                   AbsoluteLayout.LayoutBounds="0.46,0.31,25,25"
                   AbsoluteLayout.LayoutFlags="PositionProportional" />

            <Image Source="righthand.png"
                   IsVisible="{Binding IsRightHandVisible}"
                   WidthRequest="60"
                   HeightRequest="200"
                   AbsoluteLayout.LayoutBounds="0.559,0.31,25,25"
                   AbsoluteLayout.LayoutFlags="PositionProportional" />

            <Image Source="feet.png"
                   IsVisible="{Binding IsFeetVisible}"
                   WidthRequest="90"
                   HeightRequest="200"
                   AbsoluteLayout.LayoutBounds="0.513,0.474,35,25"
                   AbsoluteLayout.LayoutFlags="PositionProportional" />
        </AbsoluteLayout>

        <VerticalStackLayout Grid.Row="1" Grid.ColumnSpan="2"
                             HorizontalOptions="Center"
                             VerticalOptions="End">
            <Label Text="{Binding Hint}"
                   FontSize="18"
                   TextColor="White"
                   FontFamily="Arial"
                   FontAttributes="Bold"
                   BackgroundColor="#80000000"
                   Padding="10,5"
                   HorizontalOptions="Center"
                   VerticalOptions="Center"
                   WidthRequest="250"
                   Margin="10,-40,10,0" 
                   HorizontalTextAlignment="Center"
                   LineBreakMode="WordWrap"
                   />

            <Label Text="{Binding Spotlight}"
                   FontSize="30"
                   HorizontalOptions="Center"
                   VerticalOptions="End"
                   TextColor="Black"
                   FontAttributes="Bold"
                   Margin="0,30,0,20"/>
        </VerticalStackLayout>

        <FlexLayout x:Name="LettersContainer"
                    Grid.Row="2" Grid.ColumnSpan="2"
                    Wrap="Wrap"
                    JustifyContent="SpaceEvenly"
                    AlignItems="Center"
                    Margin="10,10,10,25">
            <BindableLayout.ItemTemplate>
                <DataTemplate>
                    <Button 
                            HeightRequest="50"
                            WidthRequest="50"
                            CornerRadius="12"
                            BackgroundColor="Beige"
                            BorderColor="Brown"
                            BorderWidth="2"
                            TextColor="Black"
                            FontAttributes="Bold"
                            Text="{Binding .}"
                            Clicked="Button_Clicked" />
                </DataTemplate>
            </BindableLayout.ItemTemplate>
            <BindableLayout.ItemsSource>
                <x:Binding Path="Letters" />
            </BindableLayout.ItemsSource>
        </FlexLayout>

    </Grid>
</ContentPage>
